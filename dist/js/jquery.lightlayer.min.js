/*! 
 jQuery LightLayer Plugin v2.3.0
 https://lightlayer.metodiev.dev

 Copyright (c) 2020 Martin Metodiev
 Licensed under the MIT license.
*/


!function(n){"use strict";n(function(){n("body").wrapInner('<div class="lightlayer-general">')}),n.lightlayer=function(e){var o=n.lightlayer;return o.params=e,o.extended||n.extend(o,{extended:!0,initial:{target:{object:n("#popup")},options:{cache:!0,escape:!0,position:"middle",backgroundColor:"#000000",opacity:.3,transition:.1}},flags:{},storage:{},css:{transitionend:"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",transitions:{"-webkit-transition":null,"-moz-transition":null,"-ms-transition":null,"-o-transition":null,transition:null}},define:{target:function(){return o.target={object:o.params&&o.params.hasOwnProperty("object")?o.params.object:o.initial.target.object,data:o.params&&o.params.hasOwnProperty("data")?o.params.data:{}},this},options:function(){for(var e in o.options={},o.initial.options)o.options[e]=o.params&&o.params.hasOwnProperty(e)?o.params[e]:o.initial.options[e];return this},events:function(){o.events={};for(var e=["onOpen","onClose","onChangeBackgroundColor","onChangeOpacity","onChangePosition","onChangeEscape","onChangeSettings"],t=0;t<e.length;t++)o.params&&o.params.hasOwnProperty(e[t])&&(o.events[e[t]]=o.params[e[t]]);return this}},layerMethods:{getPopupData:function(){return this.popup.data},backgroundColor:function(e){"undefined"!==e&&o.set.check("backgroundColor",e)&&(o.layer.trigger("onChangeBackgroundColor",[{old_value:o.options.backgroundColor,new_value:e}]),o.options.backgroundColor=e,o.set.background())},opacity:function(e){"undefined"!==e&&o.set.check("opacity",e)&&(o.layer.trigger("onChangeOpacity",[{old_value:o.options.opacity,new_value:e}]),o.options.opacity=e,o.set.background())},position:function(e){switch("undefined"!==e&&o.set.check("position",e)&&(o.layer.trigger("onChangePosition",[{old_value:o.options.position,new_value:e}]),o.options.position=e,n(".lightlayer-cell").removeAttr("style"),o.layer.popup.css("top",""),n(window).unbind("resize",o.set.thirdPosition)),o.layer.popup.is(":visible")||o.layer.popup.css("display","inline-block"),o.options.position){case"middle":n(".lightlayer-cell").css("vertical-align","middle");break;case"third":o.set.thirdPosition(),n(window).bind("resize",o.set.thirdPosition),n(".lightlayer-holder").css("margin-top","20px");break;case"top":n(".lightlayer-cell").css("vertical-align","top")}return o.layer},escape:function(e){"undefined"!==e&&o.set.check("escape",e)&&(o.layer.trigger("onChangeEscape",[{old_value:o.options.escape,new_value:e}]),o.options.escape=e);var t=(0<o.layer.popup.find(".x-button").length&&o.layer.popup.find(".x-button").remove(),0<o.layer.popup.find(".x-button").length?o.layer.popup.find(".x-button"):o.layer.popup.prepend(n('<a class="x-button" href="javascript:;"></a>')).find(".x-button"));return o.options.escape?o.flags.escape||(t.bind("click",function(e){o.layer.exit(),e.stopPropagation()}),o.layer.bind("keydown",function(e){27===e.keyCode&&o.layer.exit()}).bind("click",function(e){o.layer.exit(),e.stopPropagation()}),o.flags.escape=!0):(t&&t.remove(),o.flags.escape&&(o.layer.unbind("keydown"),o.layer.unbind("click"),o.flags.escape=!1)),o.layer},change:function(e){if(e="object"!=typeof e||n.isEmptyObject(e)?null:e)for(var t in o.layer.trigger("onChangeSettings",[e]),e)o.layer.hasOwnProperty(t)&&o.layer[t](e[t]);return this},exit:function(){function e(){n("body").removeClass("lightlayer"),n(".lightlayer-general").removeAttr("style"),o.layer.popup.removeClass("active-popup").css({display:"none",opacity:"",top:""}),o.layer.trigger("onClose",[o.layer.popup]),o.storage[o.layer.popup.attr("id")].cached=o.layer.popup.clone(),o.layer.popup.removeClass("lightlayer-popup"),o.layer.popup.find(".custom-close").unbind("click"),n(window).unbind("resize",o.set.thirdPosition),o.set.originLocation(o.storage[o.layer.popup.attr("id")].original),o.layer.remove(),n(document).scrollTop(o.flags.scrolled),delete o.layer,delete o.target,delete o.options,delete o.events,delete o.params,o.flags={}}"0"===o.options.transition||navigator.userAgent.match(/msie/i)||Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject?e():o.layer.bind(o.css.transitionend,function(){e()}),o.layer.css({opacity:0}),n("body").removeClass("opened-lightlayer"),0<o.get.scrollbarWidth()&&setTimeout(function(){n("body").removeClass("overflowed-lightlayer")},200)}},popupMethods:{saveOriginLocation:function(e){return this.originLocation=o.get.originLocation(e),this},saveData:function(){return this.data=o.target.hasOwnProperty("data")?o.target.data:null,this},bindCustomClose:function(){return 0<this.find(".custom-close").length&&this.find(".custom-close").bind("click",function(e){o.layer.exit(),e.stopPropagation()}),this},move:function(e){return o.layer.popup.addClass("lightlayer-popup").appendTo(n(".lightlayer-holder")),e.remove(),this},store:function(){return o.storage.hasOwnProperty(this.attr("id"))||(o.storage[this.attr("id")]={original:this}),this}},init:{layer:function(){for(var e in n("body").append(n("<div>",{id:"lightlayer",tabindex:"1",class:"lightlayer"}).css({display:"table"}).append(n("<div>",{class:"lightlayer-cell"}).append(n("<div>",{class:"lightlayer-holder"})))),o.css.transitions)o.css.transitions[e]="opacity "+o.options.transition+"s ease-in, background-color 0.2s ease-in";return o.layer=n(".lightlayer").css(o.css.transitions),n.extend(o.layer,o.layerMethods),this},popup:function(){var e=o.get.object();e&&(o.layer.popup=n.extend(e.clone(),o.popupMethods),o.layer.popup.saveOriginLocation(e).saveData().bindCustomClose().move(e).store())}},prepare:{scrollTop:function(){return o.flags.scrolled=n(document).scrollTop(),this},document:function(){return n(".lightlayer-general").css({width:"100%",position:"fixed",left:0,top:"-"+o.flags.scrolled+"px",minHeight:"100%"}),this},events:function(){for(var e in o.events)o.layer.bind(e,o.events[e]);return this}},set:{check:function(e,t){return n.extend(this.check,{escape:function(){return"boolean"==typeof t&&t!==o.options.escape},position:function(){return"top"===t||"third"===t||"middle"===t&&t!==o.options.position},backgroundColor:function(){return"string"==typeof t&&t!==o.options.backgroundColor},opacity:function(){return"number"==typeof t&&0<=t&&t<=1&&t!==o.options.opacity}}),this.check[e]()},background:function(){var e,t=JSON.parse(("#"===(e=o.options.backgroundColor).charAt(0)&&(e=e.substr(1)),JSON.stringify({r:parseInt(e.charAt(0)+""+e.charAt(1),16),g:parseInt(e.charAt(2)+""+e.charAt(3),16),b:parseInt(e.charAt(4)+""+e.charAt(5),16)})));return o.layer.css("background-color","rgba("+t.r+", "+t.g+", "+t.b+", "+o.options.opacity+")"),o.layer},thirdPosition:function(){if(!o.layer)return!1;o.layer.popup.css(o.layer.popup.height()<n(window).height()-40?{top:parseInt((n(window).height()-o.layer.popup.height())/3-20)}:{top:"auto"})},originLocation:function(e){var t=e.originLocation;t.parent?n(t.parent).prepend(t.obj):n(t.prev).after(t.obj)}},get:{object:function(){var e=n.extend(n(o.target.object[0]),{idCheck:function(){return void 0===this.attr("id")&&(o.flags.index=o.flags.hasOwnProperty("index")?o.flags.index+1:1,this.attr("id","popup_"+o.flags.index)),this}});return o.options.cache&&o.storage[e.idCheck().attr("id")]?o.storage[e.attr("id")].cached:0!==e.length?e:null},originLocation:function(e){var t={},o=n(e).prev();return t.obj=e,o.length?t.prev=o[0]:t.parent=n(e).parent()[0],t},scrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var n=o.offsetWidth;return e.parentNode.removeChild(e),t-n}},reveal:{popup:function(){return o.layer.trigger("onOpen",[o.layer.popup]),o.layer.popup.bind("click",function(e){e.stopPropagation()}).find("a").bind("click",function(e){e.stopPropagation()}),setTimeout(function(){n(document).scrollTop(0)},100),o.layer.popup.css("opacity",1).addClass("active-popup"),this},layer:function(){return 0<o.get.scrollbarWidth()&&n("body").addClass("overflowed-lightlayer"),setTimeout(function(){o.layer.css({opacity:1}).focus(),n("body").addClass("opened-lightlayer")},0),this}}}),o.layer||(o.define.target().options().events(),o.init.layer().popup(),o.prepare.scrollTop().document().events(),o.set.background().position().escape(),o.reveal.popup().layer()),o.layer},n.fn.lightlayer=function(t){var o;this.each(function(e){return 0===e&&(t=n.extend({},{object:n(this)},t),o=n.lightlayer(t)),o})}}(jQuery);
//# sourceMappingURL=jquery.lightlayer.min.js.map